# üöÄ –ü–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ API –ø–æ–¥—Ö–æ–¥ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (UI Scraping)

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:
- ‚è±Ô∏è **–ú–µ–¥–ª–µ–Ω–Ω–æ**: 2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
- üé≠ **Playwright overhead**: –ó–∞–≥—Ä—É–∑–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü
- üîÑ **Pagination**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- üéØ **Fragile selectors**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- üì± **UI changes**: –õ–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –¢–µ–∫—É—â–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
[class*="offer"] - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ–ª–µ–∫—Ç–æ—Ä
.price-view-2 - —Ü–µ–Ω–∞ –∑–∞ –≤—Å–µ—Ö
[class*="title"] - –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è
[class*="date"] - –¥–∞—Ç—ã
[class*="duration"] - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

## üéØ API –ø–æ–¥—Ö–æ–¥ - –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

### 1. –ê–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ fly.pl

**–¶–µ–ª—å**: –ù–∞–π—Ç–∏ API endpoints, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–π—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–ú–µ—Ç–æ–¥—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**:
```bash
# 1. –ê–Ω–∞–ª–∏–∑ Network tab –≤ DevTools
# 2. –ü–æ–∏—Å–∫ XHR/Fetch –∑–∞–ø—Ä–æ—Å–æ–≤
# 3. –ê–Ω–∞–ª–∏–∑ JSON –æ—Ç–≤–µ—Ç–æ–≤
# 4. –ü–æ–∏—Å–∫ API endpoints
```

**–û–∂–∏–¥–∞–µ–º—ã–µ endpoints**:
```
GET /api/search/offers
GET /api/offers/list
GET /api/travel/search
POST /api/search
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∑–∞–ø—Ä–æ—Å–∞

**–ë–∞–∑–æ–≤—ã–π URL**: `https://fly.pl/api/`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞** (–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ URL):
```json
{
  "destination": "14:",  // –¢—É—Ä—Ü–∏—è
  "cityIds": [0],
  "dateFrom": "20-09-2025",
  "dateTo": "04-10-2025", 
  "duration": "6:15",
  "departure": ["Warszawa", "Warszawa-Radom"],
  "adults": 2,
  "children": 1,
  "priceFrom": 0,
  "priceTo": 8100,
  "category": 40,
  "catering": 1,
  "transport": false,
  "orderBy": "price",
  "page": 1,
  "limit": 50
}
```

### 3. –û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

```json
{
  "success": true,
  "data": {
    "offers": [
      {
        "id": "12345",
        "hotelName": "Aqua Sun Village",
        "price": 6354.0,
        "pricePerPerson": false,
        "dates": {
          "from": "24-09-2025",
          "to": "01-10-2025"
        },
        "duration": "8 dni",
        "rating": 4.2,
        "url": "https://fly.pl/offer/12345",
        "images": ["url1", "url2"],
        "description": "...",
        "amenities": ["WiFi", "Pool", "Beach"]
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 3,
      "totalOffers": 150,
      "hasNext": true
    },
    "filters": {
      "priceRange": {"min": 6100, "max": 8100},
      "hotels": 47,
      "destinations": 1
    }
  }
}
```

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è API –ø–æ–¥—Ö–æ–¥–∞

### 1. –ù–æ–≤—ã–π –∫–ª–∞—Å—Å APITravelMonitor

```python
class APITravelMonitor:
    def __init__(self, config_file: str = "api_config.json"):
        self.base_url = "https://fly.pl/api"
        self.session = requests.Session()
        self.config = self.load_config()
        
    async def search_offers(self, filters: Dict) -> List[Dict]:
        """–ü–æ–∏—Å–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ API"""
        endpoint = f"{self.base_url}/search/offers"
        
        response = await self.session.post(endpoint, json=filters)
        if response.status_code == 200:
            data = response.json()
            return data['data']['offers']
        else:
            raise Exception(f"API Error: {response.status_code}")
    
    async def get_offer_details(self, offer_id: str) -> Dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"""
        endpoint = f"{self.base_url}/offers/{offer_id}"
        response = await self.session.get(endpoint)
        return response.json()
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API

```json
{
  "api_base_url": "https://fly.pl/api",
  "endpoints": {
    "search": "/search/offers",
    "offer_details": "/offers/{id}",
    "hotels": "/hotels",
    "destinations": "/destinations"
  },
  "headers": {
    "User-Agent": "TravelMonitor/1.0",
    "Accept": "application/json",
    "Content-Type": "application/json"
  },
  "rate_limits": {
    "requests_per_minute": 60,
    "requests_per_hour": 1000
  },
  "retry_config": {
    "max_retries": 3,
    "backoff_factor": 2
  }
}
```

### 3. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ API –ø–æ–¥—Ö–æ–¥–∞

**–°–∫–æ—Ä–æ—Å—Ç—å**:
- ‚ö° **10-30 —Å–µ–∫—É–Ω–¥** –≤–º–µ—Å—Ç–æ 2-3 –º–∏–Ω—É—Ç
- üöÄ **–ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã** –±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- üì¶ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** JSON

**–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**:
- üéØ **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ endpoints** 
- üìä **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
- üîÑ **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**:
- üìà **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- üîÑ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- üìä **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**

## üõ†Ô∏è –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ API (1-2 –¥–Ω—è)
1. **–ê–Ω–∞–ª–∏–∑ Network tab** –≤ DevTools
2. **–ü–æ–∏—Å–∫ API endpoints** fly.pl
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ endpoints

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–∞ (2-3 –¥–Ω—è)
1. **APITravelMonitor –∫–ª–∞—Å—Å**
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. **Rate limiting** –∏ retry –ª–æ–≥–∏–∫–∞
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (1 –¥–µ–Ω—å)
1. **–ó–∞–º–µ–Ω–∞ UI scraping** –Ω–∞ API
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ** –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1 –¥–µ–Ω—å)
1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å**: 10-30 —Å–µ–∫ (vs 2-3 –º–∏–Ω)
- üöÄ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: 99%+ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: 10x –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö

### –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:
- üéØ **–¢–æ—á–Ω–æ—Å—Ç—å**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- üìä **–ü–æ–ª–Ω–æ—Ç–∞**: –ë–æ–ª—å—à–µ –ø–æ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
- üîÑ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞:
- üßπ **–ú–µ–Ω—å—à–µ –∫–æ–¥–∞**: –£–±—Ä–∞—Ç—å Playwright
- üîß **–ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ API
- üì¶ **–ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –¢–æ–ª—å–∫–æ requests

## üö® –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - fly.pl –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π API
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
3. **Rate limits** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ò–∑–º–µ–Ω–µ–Ω–∏—è API** - endpoints –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è

### –ü–ª–∞–Ω B:
–ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å:
1. **Headless browser optimization** - —É—Å–∫–æ—Ä–∏—Ç—å Playwright
2. **Caching** - –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **Parallel processing** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
4. **Alternative sources** - –¥—Ä—É–≥–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å Network tab** fly.pl
2. **–ù–∞–π—Ç–∏ API endpoints** 
3. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø** API –∫–ª–∏–µ–Ω—Ç–∞
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–°—Ä–∞–≤–Ω–∏—Ç—å** —Å —Ç–µ–∫—É—â–∏–º –ø–æ–¥—Ö–æ–¥–æ–º

---

*–≠—Ç–æ—Ç –ø–ª–∞–Ω –ø–æ–º–æ–∂–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ 5-10 —Ä–∞–∑ –∏ —Å–¥–µ–ª–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π!* üöÄ
